<div id="<%= dom_id(investment) %>" class="budget-investment clear">
  <div class="panel <%= ('with-image' if feature?(:allow_images) && investment.image.present?) %>">

    <div class="row" data-equalizer>

      <div class="small-12 medium-12 large-12">
        <div data-equalizer-watch class="image-holder">
          <%= link_to namespaced_budget_investment_path(investment), class: 'investment-title' do %>
            <% if investment.image.present? %>
              <%= image_tag investment.image_url(:large), alt: investment.image.title.unicode_normalize %>
            <% else %>
              <!-- TODO: need bigger and better image-->
              <%= image_tag "default-investment@2x.png" %>
            <% end %>
          <% end %>
        </div>

        <div class="budget-investment-content">
          <% cache [locale_and_user_status(investment), 'index', investment, investment.author] do %>
            <%= link_to namespaced_budget_investment_path(investment), class: 'investment-title' do %>
              <h3 title="<%= investment.title %>">
                <%= strip_tags(investment.title.gsub('><', '> <')).truncate(50, separator: ' ', omission: '...') %>
              </h3>
            <% end %>
            <p class="investment-project-info">
              <%= l investment.created_at.to_date %>
              <span class="bullet">&nbsp;&bull;&nbsp;</span>
              <%= investment.heading.name %>
            </p>
            <div class="investment-project-description">
              <%= strip_tags(investment.description.gsub('><', '> <')).truncate(90, separator: ' ', omission: '...') %>
            </div>
            <%= render "shared/tags", taggable: investment, limit: 5 %>
<!--            TODO: show price and votes count-->
          <% end %>
        </div>
      </div>

      <% unless investment.unfeasible? %>
        <% if investment.should_show_votes? %>
          <div id="<%= dom_id(investment) %>_votes"
               class="small-12 medium-3 column text-center"
               <%= 'data-equalizer-watch' if feature?(:allow_images) && investment.image.present? %>>
            <%= render partial: '/budgets/investments/votes', locals: {
              investment: investment,
              investment_votes: investment_votes,
              vote_url: namespaced_budget_investment_vote_path(investment, value: 'yes')
            } %>
          </div>
        <% elsif investment.should_show_vote_count? %>
          <div id="<%= dom_id(investment) %>_votes"
               class="small-12 medium-3 column text-center"
               <%= 'data-equalizer-watch' if feature?(:allow_images) && investment.image.present? %>>
            <div class="supports js-participation">
              <span class="total-supports no-button">
                <%= t("budgets.investments.investment.supports",
                      count: investment.total_votes) %>
              </span>
            </div>
          </div>
        <% elsif investment.should_show_ballots? %>
          <div id="<%= dom_id(investment) %>_ballot"
               class="small-12 medium-3 column text-center"
               <%= 'data-equalizer-watch' if feature?(:allow_images) && investment.image.present? %>>
            <%= render partial: '/budgets/investments/ballot', locals: {
              investment: investment,
              investment_ids: investment_ids,
              ballot: ballot
            } %>
          </div>
        <% elsif investment.should_show_price? %>
          <div id="<%= dom_id(investment) %>_price"
               class="supports small-12 medium-3 column text-center"
               <%= 'data-equalizer-watch' if feature?(:allow_images) && investment.image.present? %>>
            <div class="supports">
              <span class="total-supports no-button">
                <%= investment.formatted_price %>
              </span>
            </div>
          </div>
        <% else %>
          <div <%= 'data-equalizer-watch' if feature?(:allow_images) && investment.image.present? %>></div>
        <% end %>

      <% end %>
    </div>
  </div>
</div>
