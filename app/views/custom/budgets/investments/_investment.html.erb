<div id="<%= dom_id(investment) %>" class="budget-investment clear">
  <div class="panel <%= ("with-image" if feature?(:allow_images) && investment.image.present?) %>">

    <div class="row" data-equalizer>

      <div class="small-12 medium-12 large-12">
        <div class="image-holder">
          <%= link_to namespaced_budget_investment_path(investment), class: "investment-title" do %>
            <% if investment.image.present? %>
              <%= image_tag investment.image.variant(:large), alt: investment.image.title.unicode_normalize %>
            <% else %>
              <%= image_tag "default-investment@2x.png" %>
            <% end %>
          <% end %>
        </div>

        <div class="budget-investment-content">
          <% cache [locale_and_user_status(investment), "index", investment, investment.author] do %>
            <%= link_to namespaced_budget_investment_path(investment), class: "investment-title" do %>
              <h3 title="<%= investment.title %>">
                <%= strip_tags(investment&.title&.gsub("><", "> <"))&.truncate(50, separator: " ", omission: "...") %>
              </h3>
            <% end %>
            <p class="investment-project-info">
              <%= l investment.created_at.to_date %>
              <span class="bullet">&nbsp;&bull;&nbsp;</span>
              <%= investment.heading.name %>
            </p>
            <div class="investment-project-description">
              <%= raw investment.answers.first().text.truncate(220, omission: '...') %>
              <%# strip_tags((investment&.q1.to_s + investment&.q2.to_s)&.gsub("><", "> <"))&.truncate(90, separator: " ", omission: "...") #%>
            </div>
            <% if investment.should_show_price? %>
              <div id="<%= dom_id(investment) %>_price"
                   class="supports inline-block"
                   <%= "data-equalizer-watch" if feature?(:allow_images) && investment.image.present? %>>
                <span class="total-supports no-button">
                  <%= investment.price %> â‚¬
                  <!-- <%= investment.formatted_price %> -->
                </span>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>

      <% unless investment.unfeasible? %>
        <% if @heading and investment.should_show_ballots? %>
          <div class="border-tb clearfix">
            <div id="<%= dom_id(investment) %>_ballot"
                 class="small-12 medium-12 text-right float-right"
                 <%= "data-equalizer-watch" if feature?(:allow_images) && investment.image.present? %>>
              <%= render partial: "/budgets/investments/ballot", locals: {
                investment: investment,
                investment_ids: investment_ids,
                ballot: ballot
              } %>
            </div>
          </div>
        <% elsif investment.should_show_ballots? %>
          <div class="border-tb clearix">
            <div class="small-12 medium-12">
              <p>
                <strong><%= t("custom.headings.select_heading_to_vote") %></strong>
              </p>
            </div>
          </div>
          <div <%= "data-equalizer-watch" if feature?(:allow_images) && investment.image.present? %>></div>
        <% else %>
          <div <%= "data-equalizer-watch" if feature?(:allow_images) && investment.image.present? %>></div>
        <% end %>

      <% end %>
    </div>
  </div>
</div>
